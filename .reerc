# baseline REE environment settings for server environments
# http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_performance_tuning

## ruby defaults
# RUBY_HEAP_MIN_SLOTS=10000
# RUBY_HEAP_SLOTS_INCREMENT=10000
# RUBY_HEAP_SLOTS_GROWTH_FACTOR=1.8
# RUBY_GC_MALLOC_LIMIT=8000000
# RUBY_HEAP_FREE_MIN=4096

## evan's numbers:
# http://blog.evanweaver.com/articles/2009/04/09/ruby-gc-tuning/
# RUBY_HEAP_MIN_SLOTS=500000
# RUBY_HEAP_SLOTS_INCREMENT=250000
# RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
# RUBY_GC_MALLOC_LIMIT=50000000

## 37s numbers:
# RUBY_HEAP_MIN_SLOTS=600000
# RUBY_HEAP_FREE_MIN=100000
# RUBY_HEAP_SLOTS_INCREMENT=10000
# RUBY_GC_MALLOC_LIMIT=59000000

## tmm1/jdamato numbers:
# RUBY_HEAP_MIN_SLOTS=500000
# RUBY_HEAP_SLOTS_INCREMENT=10000
# RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
# RUBY_GC_MALLOC_LIMIT=60000000

# github dev numbers:
# RUBY_HEAP_MIN_SLOTS=800000
# RUBY_HEAP_FREE_MIN=100000
# RUBY_HEAP_SLOTS_INCREMENT=300000
# RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
# RUBY_GC_MALLOC_LIMIT=79000000

## smartic.us test numbers:
# RUBY_HEAP_MIN_SLOTS=1000000
# RUBY_HEAP_FREE_MIN=500000
# RUBY_HEAP_SLOTS_INCREMENT=1000000
# RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
# RUBY_GC_MALLOC_LIMIT=1000000000

function reetest() {
   export RUBY_HEAP_MIN_SLOTS=1000000
   export RUBY_HEAP_FREE_MIN=500000
   export RUBY_HEAP_SLOTS_INCREMENT=1000000
   export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
   export RUBY_GC_MALLOC_LIMIT=3000000
   echo 'REE ruby environment variables set up for testing'
}

function reedev() {
  export RUBY_HEAP_MIN_SLOTS=1000000
  export RUBY_HEAP_SLOTS_INCREMENT=1000000
  export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
  export RUBY_GC_MALLOC_LIMIT=100000000
  export RUBY_HEAP_FREE_MIN=500000
}

function ruby_undev() {
  unset RUBY_HEAP_MIN_SLOTS
  unset RUBY_HEAP_FREE_MIN
  unset RUBY_HEAP_SLOTS_INCREMENT
  unset RUBY_HEAP_SLOTS_GROWTH_FACTOR
  unset RUBY_GC_MALLOC_LIMIT
}

function ruby193_dev() {
  export RUBY_GC_MALLOC_LIMIT=60000000
  export RUBY_FREE_MIN=200000
}

# ruby193_dev

